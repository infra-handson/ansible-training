Start - [1](step1.md) - [**2**](step2.md) - [3](step3.md) - [4](step4.md) - [5](step5.md) - [6](step6.md) - [7](step7.md) - [8](step8.md) - End


# 課題1: アドホックコマンドでshellモジュールを使う

ちょっとしたLinuxコマンドをリモートで実行したい場合、アドホックコマンドが便利です。  
課題1では、アドホックコマンドを使って各サーバでコマンドを実行して結果を確認してください。

※補足  
shellモジュールをアドホックコマンドで実行する基本的な方法は以下の通りです。

```bash
# 特定のサーバで実行したい場合
ansible -m shell -a "実行したいコマンド" -i inventory 実行したいインベントリ名
# インベントリに記載されているすべてのサーバで実行したい場合
ansible -m shell -a "実行したいコマンド" -i inventory all

# 実行例: target01のホスト名を確認するアドホックコマンド
ansible -m shell -a "hostname" -i inventory target01
```

## 課題1-1: 接続しているユーザ名の確認

- target01サーバで`whoami`コマンドを実行し、接続ユーザ名を確認してください
- すべてのサーバ（＝target01, target02）で`whoami`コマンドを実行し、接続ユーザ名を確認してください

## 課題1-2: IPの確認

- `ip a`コマンドを実行し、各サーバのIPアドレスを確認してください

## 課題1-3: ターゲットサーバ同士の疎通確認

- **target01から**target02に`ping`を実行し、疎通が行えていることを確認してください
- **target02から**target01に`ping`を実行し、疎通が行えていることを確認してください

※補足  
pingの宛先となる各サーバのIPアドレスは、課題1-2で確認したIPアドレスになります。  
`ping`コマンドは`-c`オプションを使って回数を指定する必要があります。（例: `ping 192.168.1.2 -c 4`）

## 発展課題: `ping`コマンドで`-c`オプションが必要な理由

`ping`コマンドで`-c`オプションが必要な理由を考えてみてください。

---

- [前のページに戻る](step1.md)
- [目次](README.md)
- [解説に進む](step2a.md)
