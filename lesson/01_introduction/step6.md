Start - [1](step1.md) - [2](step2.md) - [3](step3.md) - [4](step4.md) - [5](step5.md) - [**6**](step6.md) - [7](step7.md) - End

# Webサーバを構築するPlaybookを実行する

より実用的なPlaybookとして、Webサーバを構築するPlaybookを実行してみます。

## 1. 事前確認

Webサーバを稼働するURLへアクセスし、アクセスできないことを確認します。

1. ブラウザでWebサーバ1号機（`演習環境のURL:8082`）にアクセスし、アクセスできないことを確認する
2. ブラウザでWebサーバ2号機（`演習環境のURL:8083`）にアクセスし、アクセスできないことを確認する
3. ブラウザでWebサーバ3号機（`演習環境のURL:8084`）にアクセスし、アクセスできないことを確認する

:warning:補足  
`http://hoge-url`で演習環境にアクセスしている場合は`http://hoge-url:8082`のようなURLにアクセスします。

## 2. Playbookの実行

以下のコマンドを実行してください。

```bash
ansible-playbook -i inventory playbook_nginx.yaml
```

## 3. 実行後の確認

Webサーバが構築され、先程アクセスできなかったページへアクセスが可能になっていることを確認します。

1. ブラウザでWebサーバ1号機（`演習環境のURL:8082`）にアクセスし、`It works!`という画面が表示されることを確認する
2. ブラウザでWebサーバ2号機（`演習環境のURL:8083`）にアクセスし、`It works!`という画面が表示されることを確認する
3. ブラウザでWebサーバ3号機（`演習環境のURL:8084`）にアクセスし、`It works!`という画面が表示されることを確認する

ここで、3号機のみアクセスに失敗するかと思います。  
なぜ失敗するのか、正しいと思われる原因を以下から考えてください。  
次のページに解説を記載しています。

Q1. 3号機のみアクセスが失敗する原因は？

- [ ] 3号機への実行が失敗している
- [ ] Ansibleはデフォルトで2台までしか同時に実行されない
- [ ] 3号機へ実行する設定が記載されていない
- [ ] Firewallでアクセスが禁止されている

Q2. また、どうしたら成功するようになると思われるかを以下から選択してください。

- [ ] Playbookを実行するコマンドに「-n 3」オプションを追加して再実行する
- [ ] 3号機にSSH接続して設定を変更する
- [ ] Playbookのファイルを編集してからPlaybookを再実行する
- [ ] インベントリファイルを編集してからPlaybookを再実行する

---

- [前のページに戻る](step5.md)
- [目次](README.md)
- [クイズ解説に進む](step6a.md)
