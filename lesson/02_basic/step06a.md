# 課題3-回答: テンプレートを利用してファイルを配布する

`roles/kadai-3/tasks/main.yaml`

```yaml
- name: template file
  template:
    src: ./templates/template_file.j2
    dest: /tmp/template_file
```

## ★発展的な解説

Ansibleにはマジック変数と呼ばれる、実行時に自動的に定義される特殊な変数があります。  
このマジック変数の中には実行対象のホスト名（`ansible_hostname`）も含まれているため、今回の場合はこのマジック変数を使えば明示的に変数定義を行う必要がなくなります。  
余裕があれば、テンプレートファイルを以下の内容に書き換えて実行してみてください。その他のファイルや実行方法は変更不要です。  
定義していない変数を埋め込んでいるにも関わらず正常に実行できることが確認できます。

```text
マジック変数を使ってターゲットサーバにテンプレートファイルを配布します。
このサーバのホスト名は「{{ ansible_hostname }}」です。
Ansible実行後にターゲットサーバに配置されていることを確認してください。
```

---

- [前のページに戻る](step6.md)
- [目次](README.md)
- [次のページに進む](step7.md)

